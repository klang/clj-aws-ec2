<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>aws.sdk.ec2 documentation</title></head><body><div id="header"><h1><a href="index.html">Clj-aws-ec2 0.5.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="aws.sdk.ec2.html"><span>aws.sdk.ec2</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="aws.sdk.ec2.html#var-aws-filter"><span>aws-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-create-image"><span>create-image</span></a></li><li><a href="aws.sdk.ec2.html#var-create-tag"><span>create-tag</span></a></li><li><a href="aws.sdk.ec2.html#var-create-tags"><span>create-tags</span></a></li><li><a href="aws.sdk.ec2.html#var-decode-exception"><span>decode-exception</span></a></li><li><a href="aws.sdk.ec2.html#var-delete-tags"><span>delete-tags</span></a></li><li><a href="aws.sdk.ec2.html#var-deregister-image"><span>deregister-image</span></a></li><li><a href="aws.sdk.ec2.html#var-describe-images"><span>describe-images</span></a></li><li><a href="aws.sdk.ec2.html#var-describe-instances"><span>describe-instances</span></a></li><li><a href="aws.sdk.ec2.html#var-describe-tags"><span>describe-tags</span></a></li><li><a href="aws.sdk.ec2.html#var-describe-volumes"><span>describe-volumes</span></a></li><li><a href="aws.sdk.ec2.html#var-image-filter"><span>image-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-image-id-filter"><span>image-id-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-image-owner-filter"><span>image-owner-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-instance-filter"><span>instance-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-instance-id-filter"><span>instance-id-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-map-%3EObjectGraph"><span>map-&gt;ObjectGraph</span></a></li><li><a href="aws.sdk.ec2.html#var-mapper-%3E"><span>mapper-&gt;</span></a></li><li><a href="aws.sdk.ec2.html#var-run-instances"><span>run-instances</span></a></li><li><a href="aws.sdk.ec2.html#var-set-fields"><span>set-fields</span></a></li><li><a href="aws.sdk.ec2.html#var-start-instances"><span>start-instances</span></a></li><li><a href="aws.sdk.ec2.html#var-stop-instances"><span>stop-instances</span></a></li><li><a href="aws.sdk.ec2.html#var-tag-filter"><span>tag-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-tag-filter-by-resource-id"><span>tag-filter-by-resource-id</span></a></li><li><a href="aws.sdk.ec2.html#var-tag-filter-by-resource-type"><span>tag-filter-by-resource-type</span></a></li><li><a href="aws.sdk.ec2.html#var-terminate-instances"><span>terminate-instances</span></a></li><li><a href="aws.sdk.ec2.html#var-volume-filter"><span>volume-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-volume-id-filter"><span>volume-id-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-volume-snapshot-filter"><span>volume-snapshot-filter</span></a></li><li><a href="aws.sdk.ec2.html#var-volume-status-filter"><span>volume-status-filter</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>aws.sdk.ec2 documentation</h2><pre class="doc">Functions to access the Amazon EC2 compute service.

Each function takes a map of credentials as its first argument. The
credentials map should contain an :access-key key and a :secret-key
key. It can also contain an optional :endpoint key if you wish to
specify an API endpoint (i.e. region) other than us-east.</pre><div class="public" id="var-aws-filter"><h3>aws-filter</h3><div class="usage"><code>(aws-filter name &amp; values)</code></div><pre class="doc">Returns a Filter that can be used in calls to AWS to limit the results returned.

E.g. (ec2/aws-filter &quot;tag:Name&quot; &quot;my-instance&quot;)</pre></div><div class="public" id="var-create-image"><h3>create-image</h3><div class="usage"><code>(create-image cred params)</code></div><pre class="doc">Creates an Amazon EBS-backed AMI from a running or stopped instance and returns the
 new image's id.

params is a map containing the instance id and name, and any other optional parameters.

E.g.:

(ec2/create-image cred { :instance-id &quot;i-deadbabe&quot;
                         :name &quot;web-snapshot&quot;
                         :description &quot;Snapshot of web server&quot;
                         :block-device-mappings [{:device-name  &quot;/dev/sdh&quot;
                                                  :ebs {:delete-on-termination false
                                                        :volume-size 120}}]})</pre></div><div class="public" id="var-create-tag"><h3>create-tag</h3><div class="usage"><code>(create-tag k v)</code></div><pre class="doc">Create an AWS Tag object from a key/value pair.
</pre></div><div class="public" id="var-create-tags"><h3>create-tags</h3><div class="usage"><code>(create-tags cred ids tags)</code></div><pre class="doc">Adds or overwrites tags for the specified resources.

Takes a list of resource ids (e.g. instance ids, AMI ids, etc.) and
a map of tags to add or overwrite for the specified resources. E.g.:

    (ec2/create-tags cred [&quot;id-deadcafe&quot;, &quot;ami-9465dbfd&quot;] {:name &quot;web server&quot; :owner &quot;ops&quot;})</pre></div><div class="public" id="var-decode-exception"><h3>decode-exception</h3><div class="usage"><code>(decode-exception exception)</code></div><pre class="doc">Returns a Clojure containing the details of an AmazonServiceException
</pre></div><div class="public" id="var-delete-tags"><h3>delete-tags</h3><div class="usage"><code>(delete-tags cred ids tags)</code></div><pre class="doc">Deletes tags from the specified Amazon EC2 resources. E.g.:

Takes a list of resource ids (e.g. instance ids, AMI ids, etc.) and
a map of tags to delete from the specified resources. E.g.:

    (ec2/delete-tags cred [&quot;id-deadcafe&quot;, &quot;ami-9465dbfd&quot;] {:name &quot;web server&quot; :owner &quot;ops&quot;})

To delete a tag without regard to its current value, use `nil`:

    (ec2/delete-tags cred [&quot;id-deadcafe&quot;] {:owner nil})</pre></div><div class="public" id="var-deregister-image"><h3>deregister-image</h3><div class="usage"><code>(deregister-image cred image-id)</code></div><pre class="doc">Deregisters an AMI. Once deregistered, instances of the AMI can no longer be launched.

E.g.:

(ec2/deregister-image cred &quot;ami-9465dbfd&quot;)</pre></div><div class="public" id="var-describe-images"><h3>describe-images</h3><div class="usage"><code>(describe-images cred)</code><code>(describe-images cred filter)</code></div><pre class="doc">List all the EC2 images (AMIs), applying the optional filter if supplied.

You can specify filters to limit the number of AMIs returned to
those with a specific owner, or to find a specific AMI by id. E.g.:

    (ec2/describe-images cred (ec2/image-id-filter &quot;ami-9465dbfd&quot;))
    (ec2/describe-images cred (ec2/image-owner-filter &quot;self&quot;))</pre></div><div class="public" id="var-describe-instances"><h3>describe-instances</h3><div class="usage"><code>(describe-instances cred)</code><code>(describe-instances cred filter)</code></div><pre class="doc">List all the EC2 instances for the supplied credentials, applying the optional filter if supplied.

Returns a list of Reservations, a data structure which contains the following keys:
  :instances   - a list of Instances
  :groups      - a list of security groups requested for the instances in this reservation
  :group-names - a list of security group names requested for the instances in this reservation

You can specify filters to limit the number of instances returned or
to find a specific instance. E.g.:

    (ec2/describe-instances cred (ec2/instance-id-filter &quot;i-deadcafe&quot;))</pre></div><div class="public" id="var-describe-tags"><h3>describe-tags</h3><div class="usage"><code>(describe-tags cred filter)</code></div><pre class="doc">Describes one or more of the tags for your EC2 resources.

You can specify filters to limit the response when describing tags.
For example, you can use a filter to get only the tags for a
specific resource. E.g.:

    (ec2/describe-tags cred (ec2/tag-filter-by-resource-id &quot;id-babecafe&quot;))

You can also get all tags for a particular resource type:

    (ec2/describe-tags cred (ec2/tag-filter-by-resource-type &quot;image&quot;))

Or specify your own filter:

    (ec2/describe-tags cred (ec2/tag-filter (ec2/aws-filter &quot;tag:Name&quot; &quot;*webserver*&quot;)))

See
http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeTags.html#query-DescribeTags-filters
for more information about supported filters.</pre></div><div class="public" id="var-describe-volumes"><h3>describe-volumes</h3><div class="usage"><code>(describe-volumes cred)</code><code>(describe-volumes cred filter)</code></div><pre class="doc">List EBS volumes, applying the optional filter if supplied.

You can specify filters to limit the number of volumes returned to
find a specific AMI by id, or with a given status. E.g.:

    (ec2/describe-volumes cred (ec2/volume-id-filter &quot;vol-98765432&quot;))
    (ec2/describe-volumes cred (ec2/volume-snapshot-filter &quot;snap-abcd1234&quot;))
    (ec2/describe-volumes cred (ec2/volume-status-filter :available)))
See
http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeVolumes.html#cmd-DescribeVolumes-filters
for a description of available filters.</pre></div><div class="public" id="var-image-filter"><h3>image-filter</h3><div class="usage"><code>(image-filter &amp; filters)</code></div><pre class="doc">Returns a filter that can be used with ec2/describe-images. It
should be passed a Filter created by ec2/aws-filter.</pre></div><div class="public" id="var-image-id-filter"><h3>image-id-filter</h3><div class="usage"><code>(image-id-filter id)</code></div><pre class="doc">Returns an image filter that can be passed to ec2/describe-images to describe a single image.
</pre></div><div class="public" id="var-image-owner-filter"><h3>image-owner-filter</h3><div class="usage"><code>(image-owner-filter owner)</code></div><pre class="doc">Returns an image filter that can be passed to ec2/describe-images
to describe a images owned by a user (e.g. &quot;self&quot; for the current
user).</pre></div><div class="public" id="var-instance-filter"><h3>instance-filter</h3><div class="usage"><code>(instance-filter &amp; filters)</code></div><pre class="doc">Returns a filter that can be used with ec2/describe-instances. It
should be passed a Filter created by ec2/aws-filter.</pre></div><div class="public" id="var-instance-id-filter"><h3>instance-id-filter</h3><div class="usage"><code>(instance-id-filter id)</code></div><pre class="doc">Returns an instance filter that can be passed to ec2/describe-instances to describe a single instance.
</pre></div><div class="public" id="var-map-%3EObjectGraph"><h3>map-&gt;ObjectGraph</h3><div class="usage"><code>(map-&gt;ObjectGraph params)</code></div><pre class="doc">Transform the map of params to a graph of AWS SDK objects
</pre></div><div class="public" id="var-mapper-%3E"><h3>mapper-&gt;</h3><div class="usage"><code>(mapper-&gt; type)</code></div><pre class="doc">Creates a function that invokes set-fields on a new object of type
with mapped parameters.</pre></div><div class="public" id="var-run-instances"><h3>run-instances</h3><div class="usage"><code>(run-instances cred params)</code></div><pre class="doc">Launch EC2 instances.

params is a map containing the parameters to send to AWS. E.g.:

(ec2/run-instances cred { :min-count 1
                          :max-count 1
                          :image-id &quot;ami-9465dbfd&quot;
                          :instance-type &quot;t1.micro&quot;
                          :key-name &quot;my-key&quot; })

There are many parameters available to control how instances are
configured. E.g.:

(ec2/run-instances cred { :min-count 1
                          :max-count 1
                          :image-id &quot;ami-9465dbfd&quot;
                          :instance-type &quot;t1.micro&quot;
                          :key-name &quot;my-key&quot;
                          :placement { :availability-zone &quot;ap-southeast-2&quot;}
                          :block-device-mappings [{:device-name  &quot;/dev/sdh&quot;
                                                   :ebs {:delete-on-termination false
                                                         :volume-size 120}}]
                          :network-interfaces [{:subnet-id &quot;subject-f00fbaaa&quot;
                                                :device-index 0
                                                :private-ip-addresses [{:private-ip-address &quot;10.1.1.103&quot;
                                                                        :primary true}]}]
                          })

See
http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/model/RunInstancesRequest.html
for a complete list of available parameters.
</pre></div><div class="public" id="var-set-fields"><h3>set-fields</h3><div class="usage"><code>(set-fields obj params)</code></div><pre class="doc">Use a map of params to call setters on a Java object
</pre></div><div class="public" id="var-start-instances"><h3>start-instances</h3><div class="usage"><code>(start-instances cred &amp; instance-ids)</code></div><pre class="doc">Start instance(s) that use Amazon EBS volumes as their root device.

Any number of instance ids may be specified. E.g.:

    (ec2/start-instances cred &quot;i-beefcafe&quot; &quot;i-deadbabe&quot;)

Starting an already-running instance will have no effect.</pre></div><div class="public" id="var-stop-instances"><h3>stop-instances</h3><div class="usage"><code>(stop-instances cred &amp; instance-ids)</code></div><pre class="doc">Stop instance(s) that use Amazon EBS volumes as their root device.

Any number of instance ids may be specified. E.g.:

    (ec2/stop-instances cred &quot;i-beefcafe&quot; &quot;i-deadbabe&quot;)

Stopping an already-stopped instance will have no effect.</pre></div><div class="public" id="var-tag-filter"><h3>tag-filter</h3><div class="usage"><code>(tag-filter &amp; filters)</code></div><pre class="doc">Returns a filter that can be passed to ec2/describe-tags to limit the results returned. It
should be passed a Filter created by ec2/aws-filter.</pre></div><div class="public" id="var-tag-filter-by-resource-id"><h3>tag-filter-by-resource-id</h3><div class="usage"><code>(tag-filter-by-resource-id resource-id)</code></div><pre class="doc">Returns a filter that can be passed to ec2/describe-tags to get all tags for a resource.
</pre></div><div class="public" id="var-tag-filter-by-resource-type"><h3>tag-filter-by-resource-type</h3><div class="usage"><code>(tag-filter-by-resource-type resource-type)</code></div><pre class="doc">Returns a filter that can be passed to ec2/describe-tags to get all tags for a type of resource.
</pre></div><div class="public" id="var-terminate-instances"><h3>terminate-instances</h3><div class="usage"><code>(terminate-instances cred &amp; instance-ids)</code></div><pre class="doc">Terminate instance(s).

Any number of instance ids may be specified. E.g.:

    (ec2/terminate-instances cred &quot;i-beefcafe&quot; &quot;i-deadbabe&quot;)</pre></div><div class="public" id="var-volume-filter"><h3>volume-filter</h3><div class="usage"><code>(volume-filter &amp; filters)</code></div><pre class="doc">Returns a filter that can be used with ec2/describe-volumes. It
should be passed a Filter created by ec2/aws-filter.</pre></div><div class="public" id="var-volume-id-filter"><h3>volume-id-filter</h3><div class="usage"><code>(volume-id-filter id)</code></div><pre class="doc">Returns a volume filter that can be passed to ec2/describe-volumes to describe a single volume.
</pre></div><div class="public" id="var-volume-snapshot-filter"><h3>volume-snapshot-filter</h3><div class="usage"><code>(volume-snapshot-filter snapshot-id)</code></div><pre class="doc">Returns a volume filter that can be passed to ec2/describe-volumes to describe volumes created from the specified snapshot.
</pre></div><div class="public" id="var-volume-status-filter"><h3>volume-status-filter</h3><div class="usage"><code>(volume-status-filter status)</code></div><pre class="doc">Returns a volume filter that can be passed to ec2/describe-volumes to describe volumes with the specified status (e.g. :in-use).
</pre></div></div></body></html>